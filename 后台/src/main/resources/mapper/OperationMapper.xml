<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xxxx.whiteboard.mapper.OperationMapper">

    <!-- 删除掉operation中所有操作（可以，但没必要） -->
    <delete id="deleteByUserId">
        DELETE FROM operation
        WHERE user_id = ${userId}
    </delete>

    <!-- 删除掉次房间的所有操作 -->
    <delete id="deleteByRoomId">
        DELETE FROM operation
        WHERE room_id = ${roomId}
    </delete>

    <!-- 删除掉某房间某页数的所有操作 -->
    <delete id="deleteByCurrentPage">
        DELETE FROM operation
        WHERE room_id = ${roomId} AND current_page = ${currentPage};
    </delete>

    <!-- 将所有大于对应currentPage的currentPage的递减 -->
    <update id="biggerCurrentPageDecr">
        UPDATE operation
        SET current_page = current_page - 1
        WHERE current_page > ${currentPage}
    </update>

</mapper>